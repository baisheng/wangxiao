/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2016 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(e,n,t){"use strict";t.site.menu={speed:250,accordion:!0,init:function(){this.$instance=t(".site-menu"),0!==this.$instance.length&&(this.bind(),"xs"!==Breakpoints.current().name&&this.scrollable.init())},globalClick:function(e){switch(e){case"on":t(n).on("click.site.menu",function(e){t('.dropdown > [data-dropdown-toggle="true"]').length>0&&0===t(e.target).closest(".dropdown-menu").length&&t('.dropdown > [data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open")});break;case"off":t(n).off("click.site.menu")}},open:function(e){e.is(".dropdown")&&(t('[data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open"),e.find(">.dropdown-toggle").attr("data-dropdown-toggle","true")),e.addClass("open")},close:function(e){e.removeClass("open"),e.is(".dropdown")&&e.find(">.dropdown-toggle").attr("data-dropdown-toggle","false")},bind:function(){var e=this;"xs"!==Breakpoints.current().name&&e.globalClick("on"),this.$instance.on("open.site.menu",".site-menu-item",function(n){var s=t(this);"xs"===Breakpoints.current().name?e.expand(s,function(){e.open(s)}):e.open(s),e.accordion&&s.siblings(".open").trigger("close.site.menu"),n.stopPropagation()}).on("close.site.menu",".site-menu-item.open",function(n){var s=t(this);"xs"===Breakpoints.current().name?e.collapse(s,function(){e.close(s)}):e.close(s),n.stopPropagation()}).on("click.site.menu",".site-menu-item",function(n){var s=t(this);s.is(".has-sub")&&t(n.target).closest(".site-menu-item").is(this)&&(s.is(".open")?s.trigger("close.site.menu"):s.trigger("open.site.menu")),"xs"===Breakpoints.current().name?n.stopPropagation():(s.is(".dropdown")&&n.stopPropagation(),1===t(n.target).closest(".site-menu-scroll-wrap").length&&(e.scrollable.update(t(n.target).closest(".site-menu-scroll-wrap")),n.stopPropagation()))});var n=Breakpoints.current().name;Breakpoints.on("change",function(){var s=Breakpoints.current().name;e.reset(),"xs"===s?(e.globalClick("off"),e.scrollable.destory(),e.$instance.off("click.site.menu.scroll")):"xs"===n&&(e.scrollable.built||e.scrollable.init(),e.globalClick("off"),e.globalClick("on"),t(".site-menu .scrollable-container",e.$instance).css({height:"",width:""}),e.$instance.one("click.site.menu.scroll",".site-menu-item",function(){e.scrollable.refresh()})),n=s})},reset:function(){t('.dropdown > [data-dropdown-toggle="true"]').attr("data-dropdown-toggle","false").closest(".dropdown").removeClass("open")},collapse:function(e,n){var s=this,o=t(t("> .site-menu-sub",e)[0]||t("> .dropdown-menu",e)[0]||t("> .site-menu-scroll-wrap",e)[0]);o.show().slideUp(this.speed,function(){t(this).css("display",""),t(this).find("> .site-menu-item").removeClass("is-shown"),n&&n(),s.$instance.trigger("collapsed.site.menu")})},expand:function(e,n){var s=this,o=t(t("> .site-menu-sub",e)[0]||t("> .dropdown-menu",e)[0]||t("> .site-menu-scroll-wrap",e)[0]),i=o.is(".site-menu-sub")?o.children(".site-menu-item").addClass("is-hidden"):t(o.find(".site-menu-sub")[0]).addClass("is-hidden");o.hide().slideDown(this.speed,function(){t(this).css("display",""),n&&n(),s.$instance.trigger("expanded.site.menu")}),setTimeout(function(){i.addClass("is-shown"),i.removeClass("is-hidden")},0)},refresh:function(){this.$instance.find(".open").filter(":not(.active)").removeClass("open")},scrollable:{built:!1,init:function(){var e="scrollable-inverse";t.site.menubar.$instance&&t.site.menubar.$instance.is(".site-menubar-light")?e="":t(".site-menubar").is(".site-menubar-light")&&(e=""),t.each(t(".site-menu-scroll-wrap",t.site.menu.$instance),function(n,s){t(s).asScrollable({namespace:"scrollable",skin:e,direction:"vertical",contentSelector:">",containerSelector:">"}).data("asScrollable")}),this.built=!0},update:function(e){e.data("asScrollable").update()},enable:function(e){e.data("asScrollable").enable()},disable:function(e){e.data("asScrollable").disable()},refresh:function(){var e=this;t.each(t(".site-menu-scroll-wrap",this.$instance),function(n,s){e.enable(t(s))})},destory:function(){var e=this;t.each(t(".site-menu-scroll-wrap",this.$instance),function(n,s){e.disable(t(s))})}}}}(window,document,jQuery);